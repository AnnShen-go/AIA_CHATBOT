## NomicEmbeddings
nomic embdding 服務需要先申請 api key: https://atlas.nomic.ai

___


## Chroma Collections 說明：

<details>
<summary>xt131028 </summary>

**source 分類**：  
1. QA_課前.csv  
1. 最新開課.csv  
1. 簡章  
1. QA_課後.csv  
1. QA_課中.csv 

**已經納入的簡章**:  
1. 大型語言模型實作初階班 (第三期) 招生簡章  
1. AIGC 實戰工作坊：ChatGPT X 智慧工作新世紀  
1. 大型語言模型實作初階班 (LLM-A) 招生簡章  
1. 技術領袖培訓全域班第五期招生簡章  
1. ✨⚙️ 台北總校第十七期產業 AI 專班 (智慧製造) 招生簡章 ⚙️ ✨  
1. 大型語言模型實作進階班 (第二期) 招生簡章  
1. 技術領袖培訓全域班第三期招生簡章  
1. 台北總校第十八期經理人研修班招生簡章  
1. 台北總校第十九期經理人週末研修班招生簡章  
1. 大型語言模型實作初階班 (第四期) 招生簡章  
1. ✨⚙️台中分校第十二期產業 AI 專班（智慧製造）招生簡章 ⚙️ ✨  
1. 台北總校第二十期經理人週末研修班招生簡章  
1. 大型語言模型實作進階班 (第四期) 招生簡章  
1. 大型語言模型實作進階班 (LLM-B) 招生簡章  
1. 技術領袖培訓全域班第四期招生簡章  
1. 北部智慧醫療專班第六期招生簡章  
1. 大型語言模型實作初階班 (第二期) 招生簡章  
1. AIGC 實戰夏令營：高中生的第一個生成式 AI 營隊  
1. AIGC 實戰冬令營：高中生的第一個生成式 AI 營隊  
1. 台北總校第十六期經理人研修班招生簡章

**簡章切分簡述**:  
chunk大小:5000, chunk_overlap=50 ,**每個chunk前面都有「簡章名稱:」**
</details>



<details>
<summary>xt131028_v1: 修正簡章內容抓取異常，調整chunk大小為250 </summary>
  
**source 分類**：  
1. QA_課前.csv  
1. 最新開課.csv  
1. 簡章  
1. QA_課後.csv  
1. QA_課中.csv 

**已經納入的簡章**:  
1. 大型語言模型實作初階班 (第三期) 招生簡章  
1. AIGC 實戰工作坊：ChatGPT X 智慧工作新世紀  
1. 大型語言模型實作初階班 (LLM-A) 招生簡章  
1. 技術領袖培訓全域班第五期招生簡章  
1. ✨⚙️ 台北總校第十七期產業 AI 專班 (智慧製造) 招生簡章 ⚙️ ✨  
1. 大型語言模型實作進階班 (第二期) 招生簡章  
1. 技術領袖培訓全域班第三期招生簡章  
1. 台北總校第十八期經理人研修班招生簡章  
1. 台北總校第十九期經理人週末研修班招生簡章  
1. 大型語言模型實作初階班 (第四期) 招生簡章  
1. ✨⚙️台中分校第十二期產業 AI 專班（智慧製造）招生簡章 ⚙️ ✨  
1. 台北總校第二十期經理人週末研修班招生簡章  
1. 大型語言模型實作進階班 (第四期) 招生簡章  
1. 大型語言模型實作進階班 (LLM-B) 招生簡章  
1. 技術領袖培訓全域班第四期招生簡章  
1. 北部智慧醫療專班第六期招生簡章  
1. 大型語言模型實作初階班 (第二期) 招生簡章  
1. AIGC 實戰夏令營：高中生的第一個生成式 AI 營隊  
1. AIGC 實戰冬令營：高中生的第一個生成式 AI 營隊  
1. 台北總校第十六期經理人研修班招生簡章

**簡章切分簡述**:  
chunk大小:250, chunk_overlap=50
</details>

<details>
<summary>xt131028_v1.2: 換了 embedding 模型:infgrad/stella-base-zh-v3-1792d、新增課程大綱</summary>
  
**source 分類**：  
1. 簡章  
1. 大型語言模型實作初階班 (第三期) 課程大綱.csv  
1. QA_課後.csv  
1. 台中分校第十二期產業 AI 專班（智慧製造）課程大綱.csv  
1. 北部智慧醫療專班課程大綱.csv  
1. 大型語言模型實作初階班 (LLM-A) 課程大綱.csv  
1. QA_課中.csv  
1. 大型語言模型實作進階班 (LLM-B) 課程大綱.csv  
1. 台北總校第十七期產業 AI 專班（智慧製造）課程大綱.csv  
1. 台北總校第十八期經理人研修班課程大綱.csv  
1. 台北總校第二十期經理人研修班課程大綱.csv  
1. 台北總校第十九期經理人研修班課程大綱.csv  
1. 技術領袖培訓全域班-課程大綱.csv  
1. 最新開課.csv  
1. QA_課前.csv 

**已經納入的簡章**:  
1. 台北總校第十六期經理人研修班招生簡章  
1. AIGC 實戰夏令營：高中生的第一個生成式 AI 營隊  
1. 台北總校第十八期經理人研修班招生簡章  
1. 技術領袖培訓全域班第五期招生簡章  
1. 大型語言模型實作初階班 (第三期) 招生簡章  
1. 大型語言模型實作初階班 (第二期) 招生簡章  
1. 技術領袖培訓全域班第四期招生簡章  
1. 北部智慧醫療專班第六期招生簡章  
1. ✨⚙️ 台北總校第十七期產業 AI 專班 (智慧製造) 招生簡章 ⚙️ ✨  
1. 台北總校第二十期經理人週末研修班招生簡章  
1. 技術領袖培訓全域班第三期招生簡章  
1. 大型語言模型實作進階班 (LLM-B) 招生簡章  
1. 台北總校第十九期經理人週末研修班招生簡章  
1. 大型語言模型實作初階班 (第四期) 招生簡章  
1. 大型語言模型實作初階班 (LLM-A) 招生簡章  
1. ✨⚙️台中分校第十二期產業 AI 專班（智慧製造）招生簡章 ⚙️ ✨  
1. 大型語言模型實作進階班 (第二期) 招生簡章  
1. 大型語言模型實作進階班 (第四期) 招生簡章  
1. AIGC 實戰冬令營：高中生的第一個生成式 AI 營隊  
1. AIGC 實戰工作坊：ChatGPT X 智慧工作新世紀

**簡章切分簡述**:  
chunk大小:250, chunk_overlap=50
</details>

## 引入 collection 跟 embedding
```python
from vector_db import db_and_embedding

# 使用預設的 db
aia_collection = db_and_embedding.CollectionSelector("xt131028_v1")

# 明確指定 db 詳細參數的寫法:
aia_collection = db_and_embedding.CollectionSelector(collection_name="xt131028_v1", host="64.176.47.89", port=8000,chroma_client_auth_credentials="admin:admin")

# 使用db
db = aia_collection.db

query = "技術領袖培訓全域班"
documents = db.similarity_search(query)
print(documents)

# 切換 DB
db = aia_collection.switch_collection("xt131028_v1.2")

# 顯示可以用的 collections
aia_collection.show_collection_list()

# 使用 embedding model
embedding = aia_collection.embedding

print(aia_collection.host) # 顯示伺服器 ip
print(aia_collection.port) # 顯示伺服器 port
print(aia_collection.chroma_client_auth_credentials) # 顯示伺服器 auth帳密
print(aia_collection.collections_info) # 顯示 collection 跟 embedding name 的對照表
print(aia_collection.embedding_model_mapping) # 顯示 embbeding name 跟 embedding model 的對照表
```


## 引入 qa_chain_module，使用示例如下：

```python
# 調用QARetrievalPipeline
from qa_chain_module import QARetrievalPipeline

# 初始化流水線，傳入必要的参数
pipeline = QARetrievalPipeline(
    collection_name="xt131028_v1",
    nomic_api_key="nk-BCjzlgQXfYdZNA6kUZ-6Jeq1NIG2JhlQJaTe9BedpDc", #換成自己的nomic_api_key
    chroma_host="64.176.47.89",
    chroma_port=8000,
    groq_api_key="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",#換成自己的groq_api_key
    groq_model_name="llama3-8b-8192",
    ollama_model="llama3",
    ollama_base_url="http://8cf8-140-109-17-45.ngrok-free.app" # 設定自建的LLM服務位置
)

# 選擇要使用的 LLM 模型（True 使用 PrimeHub Ollama 模型，False 使用 Groq 模型）
pipeline.set_llm(use_primehub=True)


# 提供前端query至pipeline.query
question = "摘要技術領袖全域班的課程內容"
response = pipeline.query(question)
print(response)
```

